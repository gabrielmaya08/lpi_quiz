<!DOCTYPE html>
<html lang="pt-br">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Quiz LPI - Simulado</title>
Â  Â  <style>
Â  Â  Â  Â  :root { --cor-primaria: #8e44ad; --cor-fundo: #f3e5f5; --cor-card: #ffffff; }
Â  Â  Â  Â  body { font-family: 'Segoe UI', sans-serif; background-color: var(--cor-fundo); padding: 20px; margin: 0; }
Â  Â  Â  Â  .container { max-width: 800px; margin: auto; background: var(--cor-card); padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
Â  Â  Â  Â  header { display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid var(--cor-primaria); margin-bottom: 20px; padding-bottom: 10px; }
Â  Â  Â  Â  h1 { color: var(--cor-primaria); margin: 0; font-size: 24px; }
Â  Â  Â  Â  #timer { font-size: 20px; font-weight: bold; color: #e74c3c; background: #ffebee; padding: 5px 15px; border-radius: 20px; border: 2px solid #e74c3c; }
Â  Â  Â  Â  .pergunta { margin-bottom: 20px; padding: 15px; border-radius: 8px; background: #fdfbff; border: 1px solid #e1bee7; }
Â  Â  Â  Â  .pergunta p { font-weight: bold; margin-bottom: 12px; color: #4a148c; }
Â  Â  Â  Â  label { display: block; margin-bottom: 10px; cursor: pointer; padding: 8px; border-radius: 5px; }
Â  Â  Â  Â  label:hover { background-color: #f3e5f5; }
Â  Â  Â  Â  .btn { width: 100%; padding: 15px; background: var(--cor-primaria); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
Â  Â  Â  Â  .btn:disabled { background: #ccc; cursor: not-allowed; }
Â  Â  Â  Â  #resultado { margin-top: 20px; padding: 20px; text-align: center; font-size: 22px; border-radius: 10px; display: none; background: #e8f5e9; color: #2e7d32; }
Â  Â  Â  Â  .ranking { margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px; }
Â  Â  Â  Â  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
Â  Â  Â  Â  th, td { padding: 12px; border: 1px solid #eee; text-align: left; }
Â  Â  Â  Â  th { background-color: var(--cor-primaria); color: white; }
Â  Â  Â  Â  input[type="text"] { width: 100%; padding: 12px; margin-bottom: 20px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; transition: 0.3s; }
Â  Â  </style>
</head>
<body>

<div class="container">
Â  Â  <header>
Â  Â  Â  Â  <h1>Simulado LPI</h1>
Â  Â  Â  Â  <div id="timer">10:00</div>
Â  Â  </header>
Â  Â Â 
Â  Â  <div id="identificacao">
Â  Â  Â  Â  <label>Seu Nome (ObrigatÃ³rio):</label>
Â  Â  Â  Â  <input type="text" id="nomeUsuario" placeholder="Digite seu nome para validar o resultado...">
Â  Â  </div>

Â  Â  <div id="quiz-container"></div>
Â  Â Â 
Â  Â  <button class="btn" id="btnFinalizar" onclick="finalizarQuiz()">Finalizar Simulado</button>
Â  Â  <div id="resultado"></div>

Â  Â  <div class="ranking">
Â  Â  Â  Â  <h3>ğŸ† Melhores PontuaÃ§Ãµes Consolidadas</h3>
Â  Â  Â  Â  <table id="tabelaRanking">
Â  Â  Â  Â  Â  Â  <thead><tr><th>Nome</th><th>Pontos Totais</th></tr></thead>
Â  Â  Â  Â  Â  Â  <tbody><tr><td colspan="2">Carregando ranking...</td></tr></tbody>
Â  Â  Â  Â  </table>
Â  Â  </div>
</div>

<script>
Â  Â  const URL_GOOGLE_SCRIPT = "https://script.google.com/macros/s/AKfycbwL_7_XW1WhImX-9jpJ6JJ81kQMC3dgGWShTAKkVBgugtiaj2ve81NplJDuTN1k0_uNnw/exec";

Â  Â  const bancoDePerguntas = [
Â  Â  Â  Â  { q: "Qual comando exibe o diretÃ³rio atual?", options: ["ls", "pwd", "cd", "dir"], correct: 1 },
Â  Â  Â  Â  { q: "Qual diretÃ³rio contÃ©m arquivos essenciais do sistema?", options: ["/home", "/opt", "/etc", "/var"], correct: 2 },
Â  Â  Â  Â  { q: "Qual comando lista processos ativos?", options: ["top", "ls", "free", "df"], correct: 0 },
Â  Â  Â  Â  { q: "Para criar um diretÃ³rio usamos o comando:", options: ["rm", "mkdir", "rmdir", "touch"], correct: 1 },
Â  Â  Â  Â  { q: "Qual arquivo armazena contas de usuÃ¡rios?", options: ["/etc/shadow", "/etc/passwd", "/etc/group", "/etc/login"], correct: 1 },
Â  Â  Â  Â  { q: "O que o comando `chmod 755` faz?", options: ["SÃ³ leitura", "RWX dono e RX outros", "Remove execuÃ§Ã£o", "RWX todos"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando altera proprietÃ¡rio?", options: ["chmod", "chown", "chgrp", "usermod"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando move arquivos?", options: ["cp", "mv", "rm", "touch"], correct: 1 },
Â  Â  Â  Â  { q: "Qual diretÃ³rio guarda logs do sistema?", options: ["/bin", "/var/log", "/srv", "/opt"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando mostra uso de disco?", options: ["free", "top", "df -h", "uname -a"], correct: 2 },
Â  Â  Â  Â  { q: "O que significa o comando `sudo`?", options: ["Executar como root", "Ver permissÃµes", "Criar usuÃ¡rio", "Sair do terminal"], correct: 0 },
Â  Â  Â  Â  { q: "Qual o diretÃ³rio inicial do root?", options: ["/home/root", "/root", "/system", "/admin"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando apaga arquivo?", options: ["rm", "erase", "del", "clear"], correct: 0 },
Â  Â  Â  Â  { q: "Qual serviÃ§o gerencia inicializaÃ§Ã£o moderna?", options: ["sysvinit", "init.d", "systemd", "rc.local"], correct: 2 },
Â  Â  Â  Â  { q: "Qual comando vÃª IP da mÃ¡quina?", options: ["ip addr", "lsnet", "netip", "getip"], correct: 0 },
Â  Â  Â  Â  { q: "Qual porta padrÃ£o do SSH?", options: ["22", "80", "21", "443"], correct: 0 },
Â  Â  Â  Â  { q: "Qual arquivo contÃ©m DNS configurado?", options: ["resolv.conf", "hosts.conf", "dns.cfg", "net.conf"], correct: 0 },
Â  Â  Â  Â  { q: "O que faz `ping`?", options: ["Testa DNS", "Testa conectividade ICMP", "Lista processos", "Mostra portas"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando compacta arquivos em .tar.gz?", options: ["zip", "gzip", "tar czf", "pack"], correct: 2 },
Â  Â  Â  Â  { q: "Qual comando procura texto em arquivos?", options: ["findtxt", "search", "grep", "cat -f"], correct: 2 },
Â  Â  Â  Â  { q: "O que faz `cat /etc/passwd`?", options: ["Edita usuÃ¡rios", "Mostra lista de usuÃ¡rios", "Deleta contas", "Reinicia sistema"], correct: 1 },
Â  Â  Â  Â  { q: "Dono, grupo e outros definem:", options: ["polÃ­ticas", "permissÃµes", "serviÃ§os", "boot"], correct: 1 },
Â  Â  Â  Â  { q: "`chmod +x` adiciona:", options: ["leitura", "execuÃ§Ã£o", "escrita", "nenhuma"], correct: 1 },
Â  Â  Â  Â  { q: "`ls -l` mostra:", options: ["permissÃµes e donos", "sÃ³ arquivos", "sÃ³ ocultos", "sÃ³ diretÃ³rios"], correct: 0 },
Â  Â  Â  Â  { q: "`/bin` contÃ©m:", options: ["libs", "comandos essenciais", "configs", "logs"], correct: 1 },
Â  Â  Â  Â  { q: "`/home` contÃ©m:", options: ["logs", "configs", "usuÃ¡rios", "root"], correct: 2 },
Â  Â  Â  Â  { q: "`/etc/shadow` contÃ©m:", options: ["senhas", "rede", "timezone", "bootloader"], correct: 0 },
Â  Â  Â  Â  { q: "`man ls` faz:", options: ["apaga arquivos", "mostra manual", "lista diretÃ³rios", "configura serviÃ§o"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando reinicia o sistema?", options: ["stop", "reload", "reboot", "shutdown -c"], correct: 2 },
Â  Â  Â  Â  { q: "`ps aux` lista:", options: ["sÃ³ processos do usuÃ¡rio", "sÃ³ root", "todos processos", "diretÃ³rios"], correct: 2 },
Â  Â  Â  Â  { q: "`kill PID` faz:", options: ["cria processo", "mata processo", "pausa serviÃ§o", "finaliza sessÃ£o"], correct: 1 },
Â  Â  Â  Â  { q: "Kernel Ã©:", options: ["interface grÃ¡fica", "nÃºcleo do SO", "BIOS", "aplicativo"], correct: 1 },
Â  Â  Â  Â  { q: "`df -h` mostra:", options: ["memÃ³ria RAM", "uso de CPU", "discos", "permissÃµes"], correct: 2 },
Â  Â  Â  Â  { q: "NÃºmero 644 em chmod Ã©:", options: ["RW dono e R outros", "RWX todos", "RX todos", "RWX dono"], correct: 0 },
Â  Â  Â  Â  { q: "Sinal SIGKILL Ã© o nÃºmero:", options: ["1", "9", "15", "0"], correct: 1 },
Â  Â  Â  Â  { q: "`/var` contÃ©m:", options: ["logs e dados variÃ¡veis", "config root", "libs", "scripts"], correct: 0 },
Â  Â  Â  Â  { q: "Comando para alterar senha:", options: ["pass", "passwd", "pwd -p", "userpass"], correct: 1 },
Â  Â  Â  Â  { q: "`uname -a` mostra:", options: ["logs", "versÃ£o kernel", "usuÃ¡rios", "processos"], correct: 1 },
Â  Â  Â  Â  { q: "`/usr/bin` contÃ©m:", options: ["binÃ¡rios essenciais", "binÃ¡rios de usuÃ¡rios", "arquivos root", "libs"], correct: 1 },
Â  Â  Â  Â  { q: "Quem usa `apt install`?", options: ["Debian", "CentOS", "Fedora", "Arch"], correct: 0 },
Â  Â  Â  Â  { q: "Qual comando instala pacote no Red Hat?", options: ["apt", "yum/dnf", "pacman", "rpm-get"], correct: 1 },
Â  Â  Â  Â  { q: "Para ver serviÃ§os no systemd:", options: ["sysctrl", "service list", "systemctl", "initd"], correct: 2 },
Â  Â  Â  Â  { q: "O que faz `tail -f`?", options: ["mostra inÃ­cio", "mostra final contÃ­nuo", "lista tudo", "apaga"], correct: 1 },
Â  Â  Â  Â  { q: "Arquivo `/etc/hosts`:", options: ["guarda hostnames locais", "DNS pÃºblico", "interfaces", "rotas"], correct: 0 },
Â  Â  Â  Â  { q: "`ssh user@IP`:", options: ["copia arquivo", "abre conexÃ£o remota shell", "reinicia rede", "lista usuÃ¡rios"], correct: 1 },
Â  Â  Â  Â  { q: "Porta 80 Ã© usada por:", options: ["FTP", "HTTP", "SSH", "DHCP"], correct: 1 },
Â  Â  Â  Â  { q: "Porta 53:", options: ["DNS", "SSH", "FTP", "HTTPS"], correct: 0 },
Â  Â  Â  Â  { q: "O comando `su -`:", options: ["muda usuÃ¡rio", "mostra permissÃµes", "cria root", "renomeia usuÃ¡rio"], correct: 0 },
Â  Â  Â  Â  { q: "ExtensÃ£o `.sh` significa:", options: ["script shell", "arquivo texto", "binÃ¡rio", "kernel"], correct: 0 },
Â  Â  Â  Â  { q: "Comando para editar arquivos:", options: ["edit", "nano/vi", "open", "change"], correct: 1 },
Â  Â  Â  Â  { q: "`/boot` contÃ©m:", options: ["arquivos do kernel", "scripts", "logs", "usuÃ¡rios"], correct: 0 },
Â  Â  Â  Â  { q: "O que Ã© swap?", options: ["espaÃ§o RAM virtual", "rede", "log", "driver"], correct: 0 },
Â  Â  Â  Â  { q: "Comando para criar arquivo vazio:", options: ["rm", "mkfile", "touch", "cat"], correct: 2 },
Â  Â  Â  Â  { q: "`crontab -e`:", options: ["edita agendamentos", "mostra logs", "reinicia cron", "apaga jobs"], correct: 0 },
Â  Â  Â  Â  { q: "ExpressÃ£o `*/5 * * * *`:", options: ["roda a cada 5 horas", "a cada 5 minutos", "a cada 5 dias", "diariamente"], correct: 1 },
Â  Â  Â  Â  { q: "Comando para copiar:", options: ["rm", "cp", "mv", "copyfile"], correct: 1 },
Â  Â  Â  Â  { q: "Comando para ver hardware:", options: ["hwinfo", "lshw", "free", "uname"], correct: 1 },
Â  Â  Â  Â  { q: "`/dev` contÃ©m:", options: ["drivers", "dispositivos", "scripts", "logs"], correct: 1 },
Â  Â  Â  Â  { q: "Processo init tem PID:", options: ["0", "1", "100", "10"], correct: 1 },
Â  Â  Â  Â  { q: "Script comeÃ§a com:", options: ["<run>", "#!/bin/bash", "exec sh", "shell:"], correct: 1 },
Â  Â  Â  Â  { q: "Comando para contar linhas:", options: ["count", "wc -l", "linecount", "txtwc"], correct: 1 },
Â  Â  Â  Â  { q: "`grep -i`:", options: ["busca case-insensitive", "busca recursiva", "busca regex", "mostra arquivos"], correct: 0 },
Â  Â  Â  Â  { q: "`grep -r`:", options: ["recursivo", "ignora case", "busca simples", "busca regex"], correct: 0 },
Â  Â  Â  Â  { q: "O que faz `chmod 600`?", options: ["sÃ³ root lÃª", "sÃ³ dono lÃª/escreve", "acesso total", "nenhum acesso"], correct: 1 },
Â  Â  Â  Â  { q: "`/opt` contÃ©m:", options: ["pacotes opcionais", "logs", "kernel", "scripts"], correct: 0 },
Â  Â  Â  Â  { q: "VariÃ¡vel $HOME contÃ©m:", options: ["raiz", "diretÃ³rio do usuÃ¡rio", "binÃ¡rios", "serviÃ§os"], correct: 1 },
Â  Â  Â  Â  { q: "`echo $PATH` mostra:", options: ["redes", "variÃ¡veis", "caminhos executÃ¡veis", "processos"], correct: 2 },
Â  Â  Â  Â  { q: "`hostname`:", options: ["muda nome", "exibe nome da mÃ¡quina", "exibe IP", "reinicia rede"], correct: 1 },
Â  Â  Â  Â  { q: "`/sbin` contÃ©m:", options: ["binÃ¡rios administrativos", "pacotes de usuÃ¡rio", "logs", "drivers"], correct: 0 },
Â  Â  Â  Â  { q: "`ping -c 4`:", options: ["4 pings", "ping com contador CPU", "ping com cache", "ping em porta 4"], correct: 0 },
Â  Â  Â  Â  { q: "`ifconfig` pertence ao pacote:", options: ["net-tools", "iputils", "openssh", "kernel-dev"], correct: 0 },
Â  Â  Â  Â  { q: "`chmod o-r` remove:", options: ["leitura do dono", "leitura do grupo", "leitura de outros", "execuÃ§Ã£o"], correct: 2 },
Â  Â  Â  Â  { q: "`/proc` contÃ©m:", options: ["processos", "drivers", "logs", "pacotes"], correct: 0 },
Â  Â  Â  Â  { q: "`mount` serve para:", options: ["montar sistemas de arquivos", "iniciar kernel", "copiar arquivos", "criar discos"], correct: 0 },
Â  Â  Â  Â  { q: "Linha `UUID=xxx` em `/etc/fstab`:", options: ["define rede", "define disco", "define usuÃ¡rio", "define firewall"], correct: 1 },
Â  Â  Â  Â  { q: "Porta 443:", options: ["HTTP", "HTTPS", "FTP", "SSH"], correct: 1 },
Â  Â  Â  Â  { q: "Porta 25:", options: ["SMTP", "HTTP", "DNS", "SNMP"], correct: 0 },
Â  Â  Â  Â  { q: "`scp` serve para:", options: ["copiar via SSH", "copiar local", "apagar", "monitorar"], correct: 0 },
Â  Â  Â  Â  { q: "O comando `history`:", options: ["limpa terminal", "lista histÃ³rico", "lista arquivos", "limpa cache"], correct: 1 },
Â  Â  Â  Â  { q: "`chmod` trabalha com:", options: ["diretÃ³rios", "permissÃµes", "usuÃ¡rios", "memÃ³ria"], correct: 1 },
Â  Â  Â  Â  { q: "`free -h` mostra:", options: ["discos", "memÃ³ria RAM", "usuÃ¡rios", "CPU"], correct: 1 },
Â  Â  Â  Â  { q: "`/tmp` contÃ©m:", options: ["logs", "temporÃ¡rios", "scripts", "home"], correct: 1 },
Â  Â  Â  Â  { q: "Qual comando mostra rotas?", options: ["ifconfig -r", "route/ip route", "ip -g", "netstatdns"], correct: 1 },
Â  Â  Â  Â  { q: "`netstat -tlnp` mostra:", options: ["portas abertas", "DNS", "histÃ³rico", "processos mortos"], correct: 0 },
Â  Â  Â  Â  { q: "`dig` serve para:", options: ["ping", "traceroute", "consulta DNS", "listar IP"], correct: 2 },
Â  Â  Â  Â  { q: "`traceroute` mostra:", options: ["usuÃ¡rios", "caminho atÃ© destino", "permissÃµes", "discos"], correct: 1 },
Â  Â  Â  Â  { q: "`chmod g+w`:", options: ["adiciona escrita ao grupo", "dono", "outros", "remove escrita"], correct: 0 },
Â  Â  Â  Â  { q: "`/lib` contÃ©m:", options: ["bibliotecas", "logs", "scripts", "binÃ¡rios"], correct: 0 },
Â  Â  Â  Â  { q: "`useradd`:", options: ["cria usuÃ¡rio", "apaga usuÃ¡rio", "muda senha", "lista grupos"], correct: 0 },
Â  Â  Â  Â  { q: "`groupadd`:", options: ["apaga usuÃ¡rio", "cria grupo", "cria senha", "cria root"], correct: 1 },
Â  Â  Â  Â  { q: "pasta `/run` guarda:", options: ["serviÃ§os ativos", "usuÃ¡rios", "DNS", "cron"], correct: 0 },
Â  Â  Â  Â  { q: "`id usuario` mostra:", options: ["permissÃµes", "uid/gid", "cpu", "rede"], correct: 1 },
Â  Â  Â  Â  { q: "`/etc/fstab`:", options: ["monta arquivos", "rede", "swap", "processos"], correct: 0 },
Â  Â  Â  Â  { q: "`rm -r`:", options: ["remove recursivo", "remove logs", "remove pasta boot", "remove apenas arquivos"], correct: 0 },
Â  Â  Â  Â  { q: "`/srv` contÃ©m:", options: ["dados de serviÃ§os", "scripts", "tmp", "rede"], correct: 0 },
Â  Â  Â  Â  { q: "`curl` faz:", options: ["requisiÃ§Ãµes web", "edita arquivos", "backup", "criptografia"], correct: 0 },
Â  Â  Â  Â  { q: "`wget`:", options: ["browser CLI", "editor", "gerenciador", "leitor"], correct: 0 },
Â  Â  Â  Â  { q: "`chmod 777`:", options: ["libera tudo", "bloqueia tudo", "sÃ³ root acessa", "sÃ³ dono acessa"], correct: 0 },
Â  Â  Â  Â  { q: "`ip link`:", options: ["configura interface", "lista processos", "usa DNS", "lista discos"], correct: 0 },
Â  Â  Â  Â  { q: "`systemctl status`:", options: ["status de serviÃ§o", "instala pacote", "cria job", "atualiza disco"], correct: 0 }
Â  Â  ];

Â  Â  let perguntasSorteadas = [];
Â  Â  let tempoRestante = 600;
Â  Â  let intervaloTimer;

Â  Â  function iniciarTimer() {
Â  Â  Â  Â  intervaloTimer = setInterval(() => {
Â  Â  Â  Â  Â  Â  let minutos = Math.floor(tempoRestante / 60);
Â  Â  Â  Â  Â  Â  let segundos = tempoRestante % 60;
Â  Â  Â  Â  Â  Â  segundos = segundos < 10 ? '0' + segundos : segundos;
Â  Â  Â  Â  Â  Â  document.getElementById('timer').innerHTML = `${minutos}:${segundos}`;
Â  Â  Â  Â  Â  Â  if (tempoRestante <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(intervaloTimer);
Â  Â  Â  Â  Â  Â  Â  Â  finalizarQuiz(true);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  tempoRestante--;
Â  Â  Â  Â  }, 1000);
Â  Â  }

Â  Â  function iniciarQuiz() {
Â  Â  Â  Â  perguntasSorteadas = bancoDePerguntas.sort(() => 0.5 - Math.random()).slice(0, 10);
Â  Â  Â  Â  const container = document.getElementById('quiz-container');
Â  Â  Â  Â  container.innerHTML = "";
Â  Â  Â  Â  perguntasSorteadas.forEach((p, index) => {
Â  Â  Â  Â  Â  Â  let html = `<div class="pergunta"><p>${index + 1}. ${p.q}</p>`;
Â  Â  Â  Â  Â  Â  p.options.forEach((opt, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<label><input type="radio" name="p${index}" value="${i}"> ${opt}</label>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  html += `</div>`;
Â  Â  Â  Â  Â  Â  container.innerHTML += html;
Â  Â  Â  Â  });
Â  Â  Â  Â  iniciarTimer();
Â  Â  Â  Â  atualizarTabelaRanking();
Â  Â  }

Â  Â  async function finalizarQuiz(forcado = false) {
Â  Â  Â  Â  const inputNome = document.getElementById('nomeUsuario');
Â  Â  Â  Â  const nome = inputNome.value.trim();

Â  Â  Â  Â  // VALIDAÃ‡ÃƒO RIGOROSA DO NOME
Â  Â  Â  Â  if (!nome) {
Â  Â  Â  Â  Â  Â  alert("ERRO: VocÃª precisa digitar seu nome para salvar o simulado!");
Â  Â  Â  Â  Â  Â  inputNome.style.borderColor = "red";
Â  Â  Â  Â  Â  Â  inputNome.style.backgroundColor = "#fff0f0";
Â  Â  Â  Â  Â  Â  inputNome.focus();
Â  Â  Â  Â  Â  Â  return; // Interrompe totalmente a funÃ§Ã£o aqui
Â  Â  Â  Â  }

Â  Â  Â  Â  let pontos = 0;
Â  Â  Â  Â  let respondidas = 0;

Â  Â  Â  Â  perguntasSorteadas.forEach((p, index) => {
Â  Â  Â  Â  Â  Â  const selecionada = document.querySelector(`input[name="p${index}"]:checked`);
Â  Â  Â  Â  Â  Â  if (selecionada) {
Â  Â  Â  Â  Â  Â  Â  Â  respondidas++;
Â  Â  Â  Â  Â  Â  Â  Â  if (parseInt(selecionada.value) === p.correct) pontos += 10;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  if (!forcado && respondidas < 10) {
Â  Â  Â  Â  Â  Â  alert("Por favor, responda todas as questÃµes!");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Se chegou aqui, o nome existe e as questÃµes foram respondidas.
Â  Â  Â  Â  clearInterval(intervaloTimer);
Â  Â  Â  Â  const btn = document.getElementById('btnFinalizar');
Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  btn.innerText = "Enviando dados...";

Â  Â  Â  Â  await salvarNoRanking(nome, pontos);
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.getElementById('resultado').style.display = "block";
Â  Â  Â  Â  document.getElementById('resultado').innerHTML = `<h3>Simulado ConcluÃ­do!</h3><p>ParabÃ©ns <b>${nome}</b>, sua nota foi: <b>${pontos} pontos</b></p>`;
Â  Â  Â  Â  btn.style.display = "none";
Â  Â  Â  Â  document.getElementById('identificacao').style.display = "none";
Â  Â  }

Â  Â  async function salvarNoRanking(nome, pontos) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  // Envia para o Google Sheets
Â  Â  Â  Â  Â  Â  await fetch(URL_GOOGLE_SCRIPT, {
Â  Â  Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  Â  Â  mode: "no-cors",
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ nome: nome, pontos: pontos })
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Aguarda um pouco para o Google processar e atualiza a tabela
Â  Â  Â  Â  Â  Â  setTimeout(atualizarTabelaRanking, 2000);
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("Erro ao salvar:", e);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  async function atualizarTabelaRanking() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(URL_GOOGLE_SCRIPT);
Â  Â  Â  Â  Â  Â  const dadosBrutos = await res.json();
Â  Â  Â  Â  Â  Â  const tbody = document.querySelector('#tabelaRanking tbody');
Â  Â  Â  Â  Â  Â  tbody.innerHTML = "";Â 

Â  Â  Â  Â  Â  Â  if (!dadosBrutos || dadosBrutos.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = "<tr><td colspan='2'>Nenhuma pontuaÃ§Ã£o registrada.</td></tr>";
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const rankingAgrupado = {};
Â  Â  Â  Â  Â  Â  dadosBrutos.forEach(item => {
Â  Â  Â  Â  Â  Â  Â  Â  if (item && item.length >= 2) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nomeOriginal = item[0].toString().trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let pontos = parseInt(item[1]) || 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let chave = nomeOriginal.toLowerCase();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (rankingAgrupado[chave]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rankingAgrupado[chave].pontos += pontos;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rankingAgrupado[chave] = { nome: nomeOriginal, pontos: pontos };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const rankingFinal = Object.values(rankingAgrupado);
Â  Â  Â  Â  Â  Â  rankingFinal.sort((a, b) => b.pontos - a.pontos);

Â  Â  Â  Â  Â  Â  rankingFinal.slice(0, 10).forEach(item => {
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML += `<tr><td>${item.nome}</td><td>${item.pontos} pts</td></tr>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  } catch (e) {Â 
Â  Â  Â  Â  Â  Â  console.log("Erro ao carregar ranking:", e);Â 
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // Resetar cor do campo quando o usuÃ¡rio digitar
Â  Â  document.getElementById('nomeUsuario').addEventListener('input', function() {
Â  Â  Â  Â  this.style.borderColor = "#ddd";
Â  Â  Â  Â  this.style.backgroundColor = "#fff";
Â  Â  });

Â  Â  window.onload = iniciarQuiz;
</script>
</body>
</html>
